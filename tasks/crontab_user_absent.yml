---
- name: "{{ user.value.users_home | default(users_basedir + '/' + user.key) }}/bin/README.md absent"
  file:
    path: "{{ user.value.users_home | default(users_basedir + '/' + user.key) }}/bin/README.md"
    state: absent
  tags:
    - users-update
    - users-cron

- name: "Daily cron jobs for {{ user.key }} absent"
  cron:
    name: "Daily cron jobs"
    user: root
    cron_file: "chroot_cron_daily_{{ user.key }}"
    state: absent
  tags:
    - users-update
    - users-cron

- name: "Hourly cron jobs for {{ user.key }} absent"
  cron:
    name: "Hourly cron jobs"
    user: root
    cron_file: "chroot_cron_hourly_{{ user.key }}"
    state: absent
    hour: "*"
  tags:
    - users-update
    - users-cron

- name: "Cron job files for {{ user.key }} absent"
  file:
    path: "/etc/cron.d/{{ file }}"
    state: absent
  loop:
    - "chroot_cron_daily_{{ user.key }}"
    - "chroot_cron_hourly_{{ user.key }}"
  loop_control:
    loop_var: file
  tags:
    - users-update
    - users-cron

- name: "Daily cron jobs for {{ user.key }} absent"
  cron:
    name: "Daily cron jobs"
    user: "{{ user.key }}"
    state: absent
  tags:
    - users-update
    - users-cron

- name: "Hourly cron jobs for {{ user.key }} absent"
  cron:
    name: "Hourly cron jobs"
    user: "{{ user.key }}"
    state: absent
  tags:
    - users-update
    - users-cron

- name: "Daily deletion of users TMPDIR files which are older than a week absent"
  cron:
    name: "Daily deletion of TMPDIR files for {{ user.key }}"
    user: "{{ user.key }}"
    state: absent
  tags:
    - users-update
    - users-cron

- name: "Daily MariaDB dump cron job absent"
  cron:
    name: "Nightly MySQL database backup for {{ user.key }}"
    user: "{{ user.key }}"
    state: absent
  tags:
    - users-update
    - users-cron
...
